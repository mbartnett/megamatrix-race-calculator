<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Race Calculator</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700;800&display=swap');

    :root{
      --fc-border: rgba(0,0,0,.10);
      --fc-muted: rgba(0,0,0,.60);
      --fc-bg: rgba(0,0,0,.04);
      --fc-green: #1f8f4a;
    }

    html, body{ height: 100%; margin: 0; overflow: hidden; }

    body{
      font-family: "Jost", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      -webkit-font-smoothing: antialiased;
      background: #fff;
    }

    #fargo-app{
      position: fixed;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px;
      box-sizing: border-box;
      overscroll-behavior: none;
    }

    .fc-wrap{
      width: 100%;
      max-width: 520px;
    }

    .fc-card{
      background: #fff;
      border: 1px solid var(--fc-border);
      border-radius: 18px;
      padding: 16px;
      box-shadow: 0 10px 30px rgba(0,0,0,.06);
    }

    .fc-title{
      margin: 0 0 14px;
      font-size: 22px;
      font-weight: 700;
      letter-spacing: .2px;
      color: var(--fc-green);
    }

    .fc-grid{
      display: grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .fc-field label{
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: rgba(0,0,0,.75);
      margin-bottom: 6px;
    }

    .fc-input{
      width: 100%;
      padding: 16px;
      font-size: 20px;
      font-weight: 600;
      font-family: inherit;
      border: 1px solid rgba(0,0,0,.16);
      border-radius: 14px;
      background: #fff;
      box-sizing: border-box;
      appearance: none;
    }

    .fc-input:focus{
      outline: none;
      border-color: rgba(0,0,0,.35);
      box-shadow: 0 0 0 4px rgba(0,0,0,.06);
    }

    .fc-out{
      margin-top: 16px;
      padding: 24px;
      border-radius: 18px;
      background: var(--fc-bg);
      border: 1px solid rgba(0,0,0,.08);
      text-align: center;
    }

    .fc-race{
      font-size: 64px;
      font-weight: 800;
      letter-spacing: .6px;
      line-height: 1;
    }

    .fc-sub{
      margin-top: 8px;
      font-size: 13px;
      font-weight: 600;
      color: var(--fc-muted);
      letter-spacing: .2px;
    }

    .fc-actions{
      margin-top: 16px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .fc-btn{
      width: 100%;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(0,0,0,.14);
      background: #fff;
      font-size: 15px;
      font-weight: 700;
      font-family: inherit;
      color: var(--fc-green);
      cursor: pointer;
    }

    .fc-btn:active{ transform: translateY(1px); }

    .fc-btn--neutral{
      color: rgba(0,0,0,.75);
      border-color: rgba(0,0,0,.16);
    }

    /* wider screens: switch to two columns */
    @media (min-width: 520px){
      .fc-grid{ grid-template-columns: 1fr 1fr; }
      .fc-race{ font-size: 52px; }
    }
  </style>
</head>

<body>
  <div id="fargo-app"></div>

  <script>
    (() => {
      const mount = document.getElementById("fargo-app");

      mount.innerHTML = `
        <div class="fc-wrap">
          <div class="fc-card">
            <h2 class="fc-title">Megamatrix Race Calculator ðŸŽ±</h2>

            <div class="fc-grid">
              <div class="fc-field">
                <label for="p1">Player 1 Fargo</label>
                <input id="p1" class="fc-input" type="number" inputmode="numeric" />
              </div>
              <div class="fc-field">
                <label for="p2">Player 2 Fargo</label>
                <input id="p2" class="fc-input" type="number" inputmode="numeric" />
              </div>
            </div>

            <div class="fc-out" aria-live="polite">
              <div class="fc-race" id="race">0-0</div>
              <div class="fc-sub" id="tiers"></div>
            </div>

            <div class="fc-actions">
              <button class="fc-btn" id="swap" type="button">Swap Players</button>
              <button class="fc-btn fc-btn--neutral" id="clear" type="button">Clear</button>
            </div>
          </div>
        </div>
      `;

   // ===== MEGAMATRIX 3.0 (buckets: 250â€“600 by 10s) =====
const HEADERS = [600,590,580,570,560,550,540,530,520,510,500,490,480,470,460,450,440,430,420,410,400,390,380,370,360,350,340,330,320,310,300,290,280,270,260,250];

const GRID = [
  ["6-6","6-6","6-5","6-5","6-5","6-4","6-4","6-4","6-4","6-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["6-6","6-6","6-6","6-5","6-5","6-5","6-4","6-4","6-4","6-4","6-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["5-6","6-6","6-6","6-6","6-5","6-5","6-5","6-4","6-4","6-4","6-4","6-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["5-6","5-6","6-6","6-6","6-6","6-5","6-5","6-5","6-4","6-4","6-4","6-4","6-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["5-6","5-6","5-6","6-6","6-6","6-6","6-5","6-5","6-5","6-4","6-4","6-4","6-4","6-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["4-6","5-6","5-6","5-6","6-6","6-6","6-6","6-5","6-5","6-5","6-4","6-4","6-4","6-4","6-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["4-6","4-6","5-6","5-6","5-6","6-6","6-6","6-6","6-5","6-5","6-5","6-4","6-4","6-4","6-4","6-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["4-6","4-6","4-6","5-6","5-6","5-6","6-6","6-6","6-6","6-5","6-5","6-5","6-4","6-4","6-4","6-4","6-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["4-6","4-6","4-6","4-6","5-6","5-6","5-6","6-6","6-6","5-5","6-5","6-5","6-5","6-4","6-4","6-4","6-4","6-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["3-6","4-6","4-6","4-6","4-6","5-6","5-6","5-6","5-5","5-5","5-5","5-4","5-4","5-4","5-3","5-3","5-3","5-3","5-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2","8-2"],
  ["3-6","3-6","4-6","4-6","4-6","4-6","5-6","5-6","5-6","5-5","5-5","5-5","5-4","5-4","5-4","5-4","5-3","5-3","5-3","5-3","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2","8-2"],
  ["3-6","3-6","3-6","4-6","4-6","4-6","4-6","5-6","5-6","4-5","5-5","4-4","4-4","4-4","4-3","4-3","4-3","4-3","4-3","4-2","4-2","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2","8-2"],
  ["3-6","3-6","3-6","3-6","4-6","4-6","4-6","4-6","5-6","4-5","4-5","4-4","4-4","4-4","4-4","4-3","4-3","4-3","4-3","4-3","4-2","4-2","6-3","6-3","6-3","6-3","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2","8-2"],
  ["3-6","3-6","3-6","3-6","3-6","4-6","4-6","4-6","4-6","4-5","4-5","4-4","4-4","4-4","4-4","4-4","4-3","4-3","4-3","4-3","4-3","4-2","4-2","4-2","4-2","4-2","4-2","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2","8-2"],
  ["2-5","3-6","3-6","3-6","3-6","3-6","4-6","4-6","4-6","4-5","4-5","3-4","4-4","4-4","4-4","4-4","4-4","4-3","4-3","4-3","4-3","4-3","4-2","4-2","4-2","4-2","4-2","4-2","5-2","5-2","5-2","6-2","6-2","7-2","7-2","8-2"],
  ["2-5","2-5","3-6","3-6","3-6","3-6","3-6","4-6","4-6","3-5","4-5","3-4","3-4","4-4","4-4","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2","4-2","4-2","5-2","5-2","5-2","6-2","6-2","7-2","7-2"],
  ["2-5","2-5","2-5","3-6","3-6","3-6","3-6","3-6","4-6","3-5","3-5","3-4","3-4","3-4","4-4","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2","4-2","4-2","5-2","5-2","5-2","6-2","6-2","7-2"],
  ["2-6","2-5","2-5","2-5","3-6","3-6","3-6","3-6","3-6","3-5","3-5","3-4","3-4","3-4","3-4","3-3","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2","4-2","4-2","5-2","5-2","5-2","6-2","6-2"],
  ["2-6","2-6","2-5","2-5","2-5","3-6","3-6","3-6","3-6","3-5","3-5","3-4","3-4","3-4","3-4","3-3","3-3","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2","4-2","4-2","5-2","5-2","5-2","6-2"],
  ["2-7","2-6","2-6","2-5","2-5","2-5","3-6","3-6","3-6","3-6","3-5","2-4","3-4","3-4","3-4","2-3","3-3","3-3","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2","4-2","4-2","5-2","5-2","5-2"],
  ["2-7","2-7","2-6","2-6","2-5","2-5","2-5","3-6","3-6","3-6","3-6","2-4","2-4","3-4","3-4","2-3","2-3","3-3","3-3","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2","4-2","4-2","5-2","5-2"],
  ["2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","3-6","2-5","3-6","3-6","2-4","2-4","3-4","2-3","2-3","2-3","3-3","3-3","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2","4-2","4-2","5-2"],
  ["2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-5","2-5","3-6","3-6","2-4","2-4","2-3","2-3","2-3","2-3","3-3","3-3","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2","4-2","4-2"],
  ["2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-5","3-6","3-6","2-4","2-4","2-3","2-3","2-3","2-3","2-3","3-3","3-3","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2","4-2"],
  ["2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","3-6","3-6","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","3-3","3-3","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2","4-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","3-6","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","3-3","3-3","3-3","3-3","3-3","3-3","3-3","3-2","3-2","3-2","3-2","3-2","3-2","4-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","3-3","3-3","3-3","2-2","2-2","2-2","2-2","3-2","3-2","3-2","3-2","3-2","3-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","3-3","3-3","2-2","2-2","2-2","2-2","2-2","3-2","3-2","3-2","3-2","3-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","3-3","2-2","2-2","2-2","2-2","2-2","2-2","3-2","3-2","3-2","3-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","2-2","2-2","2-2","2-2","2-2","2-2","2-2","3-2","3-2","3-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","2-2","2-2","2-2","2-2","2-2","2-2","2-2","3-2","3-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","2-2","2-2","2-2","2-2","2-2","2-2","2-2","3-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","2-2","2-2","2-2","2-2","2-2","2-2","2-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","2-2","2-2","2-2","2-2","2-2","2-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","2-2","2-2","2-2","2-2","2-2"],
  ["2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-8","2-7","2-7","2-6","2-6","2-5","2-5","2-5","2-4","2-4","2-4","2-4","2-3","2-3","2-3","2-3","2-3","2-3","2-2","2-2","2-2","2-2"]
];

      const INDEX = new Map(HEADERS.map((v, i) => [v, i]));
const clamp = (n, min, max) => Math.max(min, Math.min(max, n));

const MIN = Math.min(...HEADERS);
const MAX = Math.max(...HEADERS);

const bucket10 = (n) => {
  const clamped = clamp(n, MIN, MAX);
  return Math.floor(clamped / 10) * 10;
};

// Bucket for lookup + label for display
const bucketAndLabel = (raw) => {
  if (!Number.isFinite(raw)) return { bucket: null, label: "" };
  if (raw < MIN) return { bucket: MIN, label: `<${MIN}` };
  if (raw > MAX) return { bucket: MAX, label: `>${MAX}` };

  const b = bucket10(raw);
  return { bucket: b, label: String(b) };
};


      const $ = (sel) => mount.querySelector(sel);
      const p1 = $("#p1"), p2 = $("#p2"), raceEl = $("#race"), tiersEl = $("#tiers");

     const update = () => {
  const v1 = parseFloat(p1.value);
  const v2 = parseFloat(p2.value);

  if (!Number.isFinite(v1) || !Number.isFinite(v2)){
    raceEl.textContent = "0-0";
    tiersEl.textContent = "";
    return;
  }

  // bucket both
  const a = bucketAndLabel(v1);
  const b = bucketAndLabel(v2);

  // IMPORTANT: matrix is (higher) vs (lower)
  const hi = (v1 >= v2) ? a : b;
  const lo = (v1 >= v2) ? b : a;

  const r = INDEX.get(hi.bucket);
  const c = INDEX.get(lo.bucket);

  const race = (r !== undefined && c !== undefined) ? (GRID[r]?.[c] ?? "0-0") : "0-0";

  raceEl.textContent = race;
  tiersEl.textContent = `${a.label} vs ${b.label}`; // keeps display order as typed
};


      p1.addEventListener("input", () => { if (p1.value.length >= 3) p2.focus(); update(); });
      p2.addEventListener("input", () => { if (p2.value.length >= 3) p2.blur(); update(); });

      $("#swap").addEventListener("click", () => { [p1.value, p2.value] = [p2.value, p1.value]; update(); });

      $("#clear").addEventListener("click", () => {
        p1.value = ""; p2.value = "";
        update();
        document.activeElement?.blur?.();
      });

      // lock page scroll
      document.addEventListener("touchmove", (e) => e.preventDefault(), { passive: false });

      update();
    })();
  </script>
</body>
</html>
